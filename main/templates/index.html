<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Игровой обозреватель - Описания и отзывы о компьютерных играх</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>Игровой обозреватель</h1>
            <p>Честные описания и отзывы о компьютерных играх</p>
        </div>
    </header>
    
    <div class="container">
        <div class="game-list" id="gameList">
            <!-- Карточки игр будут загружены сюда динамически -->
            <div class="loading">Загрузка данных...</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const response = await fetch('/api/games');
                if (!response.ok) {
                    throw new Error('Ошибка сети');
                }
                const games = await response.json();
                renderGames(games);
            } catch (error) {
                console.error('Ошибка загрузки данных:', error);
                document.getElementById('gameList').innerHTML = 
                    '<p class="error">Не удалось загрузить данные. Пожалуйста, попробуйте позже.</p>';
            }
        });

        function renderGames(games) {
            const gameList = document.getElementById('gameList');
            gameList.innerHTML = games.map(game => `
                <div class="game-card">
                    <img src="${game.image}" alt="${game.title}" class="game-image">
                    <div class="game-content">
                        <h2 class="game-title">${game.title}</h2>
                        ${game.genres.map(genre => `<span class="game-genre">${genre}</span>`).join('')}
                        <p class="game-description">${game.description}</p>
                        <div class="game-rating">Рейтинг: ${game.rating}/10</div>
                        
                        <div class="reviews-section">
                            <h3>Отзывы:</h3>
                            ${game.reviews.map(review => `
                                <div class="review">
                                    <div class="review-author">${review.author}</div>
                                    <div class="review-date">${review.date}</div>
                                    <div class="review-rating">Оценка: ${review.rating}/10</div>
                                    <p class="review-text">${review.text}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
        }
    </script>
</body>
</html>